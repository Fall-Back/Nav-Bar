/*-------------------------------------------------------------------------------------------------|
    Fall-Back Start-CSS Settings v1.0.0

    Fall-Back is designed for use with the basic
    [CSS Mustard Cut](https://github.com/Fall-Back/CSS-Mustard-Cut)
    
    This determines a browser support base of:
    
    IE 9+, FF 8+, Opera 12, [Chrome 29+, Android ~4.4+]
    Chrome 29+, Opera 16+, Safari 6.1+, iOS 7+, Android ~4.4+
    
    
    Any double-classing (e.g. `.class.class`) is deliberate and intended to increase specifity.
    This allows Start-CSS declarations to be overidden.
    E.g. `.{pattern}__open.{pattren}__open` overrides `a[href]`.
    
|-------------------------------------------------------------------------------------------------*/

$fallback--root-font-size:         16px !default;
$fallback--base-font-size:         16px !default;
$fallback--base-line-height:       24px !default; // 1.25

$fallback--base-em-ratio:          $fallback--base-line-height / $fallback--base-font-size; // 1.71428571429
$fallback--root-font-size-percent: ($fallback--root-font-size / 16px) * 100;
//@debug $fallback--base-line-height;
//@debug ($fallback--base-line-height / $fallback--root-font-size);
//@debug ($fallback--base-line-height / $fallback--root-font-size) * 1rem;

$fallback--base-rem-space-unit:    ($fallback--base-line-height / $fallback--root-font-size) * 1rem;
$fallback--base-rem-1px:           1px / $fallback--root-font-size * 1rem;

$fallback--base-font-family:       sans-serif !default;
// Consider:
//$fallback--base-font-family:       -apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif !default;
// https://bitsofco.de/the-new-system-font-stack/ https://github.com/necolas/normalize.css/issues/665


$fallback--base-ui-color:          #663399 !default; //rebeccapurple #663399 rgb(102,51,153)

$fallback--base-background-color:  #fff !default;
$fallback--base-text-color:        #333 !default;

$fallback--breakpoint--enhanced:   50em !default;

/*-------------------------------------------------------------------------------------------------|
    Fall-Back Nav Bar Pattern v2.0.0
|-------------------------------------------------------------------------------------------------*/

$fallback--nav-bar--breakpoint--enhanced:        $fallback--breakpoint--enhanced;


// Colours:

$fallback--nav-bar--base-ui-color:               $fallback--base-ui-color !default;
$fallback--nav-bar--base-text-color:             $fallback--base-text-color !default;


$fallback--nav-bar--background-color:            $fallback--nav-bar--base-ui-color !default;

$fallback--nav-bar__link--color:                 #fff !default;
$fallback--nav-bar__link--color--alt:            $fallback--nav-bar__link--color !default;
$fallback--nav-bar__link--background-color:      $fallback--nav-bar--background-color !default;
$fallback--nav-bar__link--background-color--alt: darken($fallback--nav-bar--base-ui-color, 10%) !default;

$fallback--nav-bar__link--border-color:          rgba(255,255,255,0.2) !default;
$fallback--nav-bar__link--border-style:          solid !default;
$fallback--nav-bar__link--border-width:          1px !default;


$fallback--sub-nav--background-color:            darken($fallback--nav-bar--base-ui-color, 20%) !default;

$fallback--sub-nav__link--border-color:          rgba(255,255,255,0.3) !default;
$fallback--sub-nav__link--border-style:          dashed !default;
$fallback--sub-nav__link--border-width:          1px !default;


$fallback--sub-nav__link--color:                 $fallback--nav-bar__link--color !default;
$fallback--sub-nav__link--color--alt:            $fallback--sub-nav__link--color !default;
$fallback--sub-nav__link--background-color:      $fallback--sub-nav--background-color !default;
$fallback--sub-nav__link--background-color--alt: lighten($fallback--sub-nav__link--background-color, 10%) !default;


$fallback--nav-bar__title--background-color:     $fallback--nav-bar--background-color !default;



// Sizes:

$fallback--nav-bar--font-size:                   $fallback--base-font-size !default;
$fallback--nav-bar--height:                      ($fallback--base-em-ratio * 1.5em) !default;
//$fallback--nav-bar--height:                      40px !default;
$fallback--nav-bar--spacing:                     ($fallback--nav-bar--height / 8) !default;
//$fallback--nav-bar--spacing:                     5px !default;
$fallback--nav-bar--margin-bottom:               0 !default;
$fallback--nav-bar__title--padding:              0 !default;

$fallback--nav-bar___open--size:                 0.64285714285em !default;//$fallback--nav-bar--spacing * 2 !default;
$fallback--nav-bar___cancel--size:               1em !default;



// Transitions:

$fallback--sub-nav---transition:                 margin-top 0.5s ease !default;



// Other:

$fallback--nav-bar__title--font-size:            1.5em !default;
$fallback--nav-bar__title--font-style:           normal !default;
$fallback--nav-bar__title--font-weight:          bold !default;
$fallback--nav-bar__title--font-family:          Arial, Helvetica, sans-serif !default;

// Calculate title heights based on IT'S font size:
$fallback--nav-bar__title--height:               (($fallback--base-line-height * 1.5) / (($fallback--nav-bar__title--font-size / 1em) * $fallback--base-font-size) * 1em);


// MQ hacks:
// https://jeffclayton.wordpress.com/2014/07/22/internet-explorer-css-hacks-collection/
// 0\0 encoded to preserve hack.
$fallback--ie9--hack:                            "all and (min-width: \0030\005C\0030) and (min-resolution: .001dpcm)" !default;

/* -- Basic/fallback layout --------------------------------------------------------------------- */
/****
    // Mini reset if Start-CSS not present: (do we really need a condition? How do we do NOT variable-exists?)
    //@if variable-exists($using-start-css) {
        // Actually, this might be a good this to have anyway, not as a reset.
        // Could then remove other declarations of `line-height`.
        .nav-bar,
        .nav-bar * {
            line-height: $fallback--nav-bar__title--height;
        }

        .nav-bar a {
            text-decoration: none;
        }
    //}
*/
    /* -- .nav-bar -------------------------------------------------------------------------------*/

    /*
    */
    .nav-bar {
        background-color: $fallback--nav-bar--background-color;

        @if $fallback--nav-bar--font-size != $fallback--base-font-size {
            font-size: $fallback--nav-bar--font-size;
        }

        // Have no recollection why this is needed:
        // It forces the nav-bar to remain visible (though empty) on small screens. Not good, but
        // may have fixed other things so keep as reminder
        //--@include fallback-rem(min-height, $fallback--nav-bar--height);
    }


    ///* IE7- hacks (can't use MQ or IE8 Respond applies it): */
    //.nav-bar {
    //    *zoom: 1;
    //}

    /* -------------------------------------------------------------------------------------------*/

    /* -- .nav-bar__title ----------------------------------------------------------------*/

    /*
        1. For IE 9 and FF 21-.
    */
/****
    .nav-bar .nav-bar__title {
        white-space: nowrap; /* [1] * /
        vertical-align: top; /* [1] * /
        //--@include fallback-rem(min-height, $fallback--nav-bar--height);

        display: -webkit-box;
        display: -webkit-flex;
        display: -ms-flexbox;
        display: flex;

        //display: -webkit-flex;
        //display: -ms-flexbox;
        //display: flex;

        -webkit-box-pack: justify;
        -webkit-justify-content: space-between;
        -ms-flex-pack: justify;
        justify-content: space-between;

        //-webkit-box-pack: justify;
        //   -ms-flex-pack: justify;
        // justify-content: space-between;
    }
*/

    /*
        1. For IE 9 and FF 21-.
    */
    .nav-bar .nav-bar__title {
        //vertical-align: top; /* [1] */

        background: $fallback--nav-bar__title--background-color;
        // Not sure what this was for causes problems for top-bar layouts:
        //width: 100%;

        height: $fallback--nav-bar__title--height;
        line-height: $fallback--nav-bar__title--height;

        font-family: $fallback--nav-bar__title--font-family;
        font-weight: $fallback--nav-bar__title--font-weight;
        font-style: $fallback--nav-bar__title--font-style;
        font-size: $fallback--nav-bar__title--font-size;

        white-space: nowrap;
    }

        .nav-bar .nav-bar__title .nav-bar__link {
            height: $fallback--nav-bar__title--height;
            line-height: $fallback--nav-bar__title--height;
        }



/****
    @media only screen and (max-width: $fallback--nav-bar--breakpoint--enhanced) {
        // Apply the table-cell hack to IE9.
        _::selection, .nav-bar__title > * {
            display: table-cell\0 !important;
            width: 1px\0;
        }
        // Note this isn't very robust:
        _::selection, .nav-bar__title > div {
            display: table-cell\0 !important;
            width: 100%\0;
            text-align: center;
        }

        // Without flexbox positioning doesn't sort itself out, so use text-align to position the title.
        // If there's no control to the left:
        _::selection, .nav-bar__title > div:first-child {
            text-align: left;
        }
        // If there's no control to the right
        _::selection, .nav-bar__title > div:last-child {
            text-align: right;
        }


        //Apply hacks for old FF.
        _:-moz-tree-row(hover), .nav-bar__title {
            display: -moz-box;
            -moz-box-pack: justify;
            width: 100%;
            text-align: center;
        }

        _:-moz-tree-row(hover), .nav-bar__title >  div {
            -moz-box-flex: 1;
        }
    }
*/

    /* -- .nav-bar__inner ------------------------------------------------------------------------*/

    /*
        1. Duplicating parent background-color here. There HAS to be a colour here for the pattern
           to work, the parent background-color is there to allow things to be NOT BROKEN on
           browsers that don't support HTML semantic elements.

        2. Prevent any overflow and possible contain floats.
    */

    .nav-bar .nav-bar__inner {
        background-color: $fallback--nav-bar--background-color; /* 1 */
        overflow: hidden; /* 2 */
    }




    ///* IE7- hacks (can't use MQ or IE8 Respond applies it): */
    //.nav-bar__inner {
    //    *zoom: 1;
    //}

    /* -------------------------------------------------------------------------------------------*/


    /* -- .nav-bar__button -----------------------------------------------------------------------*/
    /* Unused? */
    /*.nav-bar__button {
        -webkit-appearance: none;
        border-radius: 0;
        margin: 0;
        padding: 0;
        background: #ddd;
        border: none;
        @include fallback-rem(height, $fallback--nav-bar--height);
    }

    .nav-bar__button:hover,
    .nav-bar__button:active,
    .nav-bar__button:focus {
        background-color: #ccc;  /* @var *
    }
    */
    /* -------------------------------------------------------------------------------------------*/


    /* -- .nav-bar__items -------------------------------------------------------------------------*/

    /*
        1. F
    */
    .nav-bar .nav-bar__items {
        //width: 100%; /* 1 */
        list-style-type: none;
        padding: 0;
        margin: 0;
        /****float: left;

        -webkit-box-flex: 0;
            -webkit-flex: 0 1 auto;
                -ms-flex: 0 1 auto;
                    flex: 0 1 auto;*/
    }

        .nav-bar .nav-bar__item {
            margin: 0;
        }

        .nav-bar .nav-bar__item::before {
            display: none;
        }


        /*.nav-bar .nav-bar__item:not(:first-child) {
            border-style: $fallback--nav-bar__link--border-style;
            border-color: $fallback--nav-bar__link--border-color;
            border-left-width: $fallback--nav-bar__link--border-width;
        }

        .nav-bar .nav-bar__item:last-child {
            border-right-width: $fallback--nav-bar__link--border-width;
        }* /

    /* -------------------------------------------------------------------------------------------*/

    /* -- .subnav --------------------------------------------------------------------------------*/

    .nav-bar .subnav {
        //display: block;
        padding: 0;
        margin-left: $fallback--nav-bar--spacing * 4;
        background-color: $fallback--sub-nav--background-color;

        // OSX/iOS needs this:
        //min-height: $fallback--nav-bar--height;

    }

    .nav-bar .subnav__items {
        //display: block;
        list-style-type: none;
        padding: 0;
        margin: 0;

        // OSX/iOS needs this:
        //min-height: $fallback--nav-bar--height;

    }

    // Contain floats:
    .nav-bar .subnav__items::before,
    .nav-bar .subnav__items::after {
        content: " ";
        display: table;
    }

    .nav-bar .subnav__items::after {
        clear: both;
    }


    .nav-bar .subnav__item {
        margin: 0;
        float: left;
    }

    // This is to turn off Start-CSS's custom bullets:
    .nav-bar .subnav__item::before {
        display: none;
    }


    /* -------------------------------------------------------------------------------------------*/


    /* -- .nav-bar__link, .subnav__link ----------------------------------------------------------*/

    .nav-bar .nav-bar__link,
    .nav-bar .subnav__link,
    .nav-bar .subnav__heading {
        display: block;
        margin: 0;
        //padding: ($fallback--nav-bar--spacing * 1.333333) ($fallback--nav-bar--spacing * 2);
        padding-left: $fallback--nav-bar--spacing * 2;
        padding-right: $fallback--nav-bar--spacing * 2;
        border: 0;
        //height: $fallback--nav-bar--height;
        line-height: $fallback--nav-bar--height;

        text-decoration: none;
        outline: 0;
    }

    // This is to turn off Start-CSS's hover border:
    .nav-bar .nav-bar__link:hover,
    .nav-bar .nav-bar__link:active,
    .nav-bar .nav-bar__link:focus,
    .nav-bar .subnav__link:hover,
    .nav-bar .subnav__link:active,
    .nav-bar .subnav__link:focus {
        border: 0;
    }

/****
    .nav-bar__title-text .nav-bar__link {
        padding-top: 0;
        padding-bottom: 0;
    }
*/

    /*
        Fix for Opera Mini vertical centering:
        (affects Opera 12.10-16 as well)
    */
    _:-o-prefocus, body:last-child .nav-bar .nav-bar__link,
    _:-o-prefocus, body:last-child .nav-bar .subnav__link,
    _:-o-prefocus, body:last-child .nav-bar .subnav__heading {
        //line-height: 1.71428571429 !important;
        line-height: $fallback--nav-bar--height !important;


    }


    .nav-bar .nav-bar__link {
        color: $fallback--nav-bar__link--color;
        background-color: $fallback--nav-bar__link--background-color;
    }
/****
    .nav-bar .nav-bar__link .icon {
        display: none;
    }
*/
    .nav-bar .subnav__heading {
        color: $fallback--nav-bar__link--color;
    }


    .nav-bar .subnav__link {
        //display: inline-block;
        color: $fallback--sub-nav__link--color;
        background-color: $fallback--sub-nav__link--background-color;
    }


    /*
        Don't allow the usual interaction effects on ALL nav-bar links:
        (this is to allow submenu heading links to appear as a non-link)
    */
/****
    .nav-bar .nav-bar__link:hover,
    .nav-bar .nav-bar__link:focus,
    .nav-bar .nav-bar__link:active,
    .nav-bar .subnav__link:hover,
    .nav-bar .subnav__link:focus,
    .nav-bar .subnav__link:active {
        text-decoration: none;
        outline: 0;
    }
*/

    /*
        Provide interaction effects for nav-bar links that ARE links:
        (this excludes submenu heading links - note that submenu links should never also be
        submenu heading links)
    */

    .nav-bar .nav-bar__link:hover,
    .nav-bar .nav-bar__link:focus,
    .nav-bar .nav-bar__link:active {
        color: $fallback--nav-bar__link--color--alt;
        background-color: $fallback--nav-bar__link--background-color--alt;
    }

    .nav-bar .subnav__link:hover,
    .nav-bar .subnav__link:focus,
    .nav-bar .subnav__link:active {
        color: $fallback--sub-nav__link--color--alt;
        background-color: $fallback--sub-nav__link--background-color--alt;
    }


    /*.nav-bar [href$="#"].nav-bar__link {
        /* Override link hover effect - we want this to not look like a link in basic mode: *
        background-color: transparent;
        cursor: default;
    }*/


    /*.nav-bar .subnav__heading + .subnav__open {
        display: none;
    }*/


    /*.nav-bar .subnav__open::before {
        content: attr(data-content);
        display: inline-block;
    }*/



    .nav-bar .subnav__control {
        display: none;
    }


    .nav-bar .nav-bar__additional {
        //padding-left: $fallback--nav-bar--spacing * 2;
        //padding-right: $fallback--nav-bar--spacing * 2;
    }
/* -----------------------------------------------------------------------------------------------*/


/* ********************************************************************************************** */
/* -- Enhanced layout --------------------------------------------------------------------------- */
    @media only screen and (min-width: $fallback--nav-bar--breakpoint--enhanced) {

        /*
            1. Flex is only really needed for 'additional' to fill up the space.
               I don't think this would actually do any harm...
        */
        .nav-bar {
            position: relative;
            z-index: 1000; // @var

            display: -webkit-flex;
            display: -ms-flexbox;
            display: flex; /* 1 */
        }

        /*
            Child items are floated, so clear those.
        */
        .nav-bar::before,
        .nav-bar::after {
            content: " ";
            display: table;
        }

        .nav-bar::after {
            clear: both;
        }

        /*
            1. Floating left to allow 'additional' to appear on the same line, but width 100% to
               make sure any subnavs are properly obscured, otherwise it looks weird.
               However, this makes 'additional' collapse to it's content.
               In the case of search form, this means the form is smaller than it could be.
               It's still useable, but ...

            2. ... flex makes this better ...
        */
        .nav-bar .nav-bar__inner {
            float: left; /* 1 */
            width: 100%; /* 1 */

            -webkit-flex: 1 0 auto;
                -ms-flex: 1 0 auto;
                    flex: 1 0 auto; /* 2 */
        }

        /*
            1. ... but we need to turn off 100% width if we're using flex.
        */
        @supports (display: -webkit-flex) or
                  (display: -ms-flex) or
                  (display: flex) {
            .nav-bar .nav-bar__inner {
                width: auto; /* 1 */
            }
        }

        /*
            Set flex-grow for immediate children to help with things like top-bar combinations
            (search form won't grow otherwise).
        */
/****
        .nav-bar > * {
            -webkit-flex: 1 0 auto;
                -ms-flex: 1 0 auto;
             *       flex: 1 0 auto;
        }

        .nav-bar .nav-bar__title {
            -webkit-flex: 0 0 auto;
                -ms-flex: 0 0 auto;
                    flex: 0 0 auto;
        }
*/



        /*
            Apply table-cell hack to all FF because -moz-box in FF12- doesn't honour
            `position:relative` and applying the table-cell hack to everything causes other
            problems.
        */
/****
        _:-moz-tree-row(hover), .nav-bar > * {
            display: table-cell;
            width: 100%;
        }
        _:-moz-tree-row(hover), .nav-bar .nav-bar__title {
            display: table-cell;
            width: 1px;
        }
*/

        /*
            Apply the table-cell hack to IE9.
        */
/****
        _::selection, .nav-bar > * {
            display: table-cell\0;
            width: 100%\0;
        }
        _::selection, .nav-bar .nav-bar__title {
            display: table-cell\0;
            width: 1px\0;
        }
*/


        /*
            Remove table hack properties for browsers that support flexbox AND @supports.
            Note, we're only interested in FF here, as other browsers already have flexbox properties
            applied if they support it, so in this case the following is only relevent for FF22+
            (below that FF will still use the table hack as applied above).
        */
/***
        @supports (display: flex) {
            .nav-bar > *,
            .nav-bar .nav-bar__title {
                display: block;
                width: auto;
            }
        }
*/

        /*
            Add dividers.
            Dividers created by adding right borders to nav-bar__items.
        */

        .nav-bar .nav-bar__title,
        .nav-bar .nav-bar__item {
            border-style: $fallback--nav-bar__link--border-style;
            border-color: $fallback--nav-bar__link--border-color;
            border-top-width: 0;
            border-bottom-width: 0;
            border-left-width: 0;
            border-right-width: $fallback--nav-bar__link--border-width;
        }

        .nav-bar .nav-bar__link + .subnav__control {
            border-style: $fallback--sub-nav__link--border-style;
            border-color: $fallback--sub-nav__link--border-color;
            border-top-width: 0;
            border-bottom-width: 0;
            border-left-width: $fallback--sub-nav__link--border-width;
            border-right-width: 0;
        }

        // Prevent anything wrapping (fixed height is cruicial to making this work),
        // and make things float
        .nav-bar .nav-bar__title,
        .nav-bar .nav-bar__item,
        .nav-bar .nav-bar__link,
        .nav-bar .subnav__link,
        .nav-bar .subnav__heading {
            white-space: nowrap;
            float: left;
        }



        // Set-up slide toggling for subnavs:
        .nav-bar .subnav {
            position: absolute;
            visibility: hidden;
            left: 0;
            right: 0;
            top: 0;
            z-index: -1;
            padding: 0;
            margin: 0;
            padding: 0;

            // OSX/iOS needs this:
            height: $fallback--nav-bar--height;

            -webkit-transition: margin-top 0.5s ease,
                                visibility 0s   ease 0.5s;
               -moz-transition: margin-top 0.5s ease,
                                visibility 0s   ease 0.5s;
                 -o-transition: margin-top 0.5s ease,
                                visibility 0s   ease 0.5s;
                    transition: margin-top 0.5s ease,
                                visibility 0s   ease 0.5s;
        }



        :target + .subnav {
            visibility: visible;
            margin-top: $fallback--nav-bar--height;

            -webkit-transition: margin-top 0.5s ease;
               -moz-transition: margin-top 0.5s ease;
                 -o-transition: margin-top 0.5s ease;
                    transition: margin-top 0.5s ease;
        }



        .nav-bar .subnav__heading {
            display: none;
        }
/****
        .nav-bar .subnav__link {
            white-space: nowrap;
        }

*/
        .nav-bar .subnav__open {
            display: block;
        }

        //.nav-bar .subnav__open::before {
        .nav-bar .subnav__control-heading::before {
            content: attr(data-content);
            display: inline-block;
            speak: none;
        }

        .nav-bar .subnav__heading + .subnav__open::before {
            padding-right: $fallback--nav-bar--spacing * 2;
        }


        // Set up the aria-live messages:
        .nav-bar .subnav__is-closed-message {
            display: inline;
        }

        .nav-bar .subnav__is-open-message {
            display: none;
        }

        .nav-bar :target .subnav__is-closed-message {
            display: none;
        }

        .nav-bar :target .subnav__is-open-message {
            display: inline;
        }



        /*.nav-bar .subnav__open:focus + .subnav .subnav__link,
        .nav-bar .subnav__link:focus {
            margin-top: $fallback--nav-bar--height;
        }*/


        /*
            Fixes cancel button behaviour if not using overflow:hidden on .nav-bar__inner
            (Maybe be temp - I can't quite remember what the overflow:hidden was for.
            May have been a float-clearing thing but may not need this now?)
        */
        /*.nav-bar .subnav__cancel:focus,
        .nav-bar .subnav__cancel:active {
            margin-top: 0;
        }*/


        /*.nav-bar .subnav__item {
            float: none;
            display: table-cell;
        }*/

        .nav-bar .subnav__items {
            float: left;
        }

        .nav-bar .subnav__cancel {
            display: block;
            float: right;
        }


        /*
            1. The 9999 hack forces this element to take up as much room as it can.
               (See http://joren.co/flex-grow-9999-hack/)
        */
        .nav-bar .nav-bar__additional {
            background-color: $fallback--nav-bar--background-color;

            float: right;

            -webkit-flex: 9999 0 auto;
                -ms-flex: 9999 0 auto;
                    flex: 9999 0 auto; /* 1 */
        }

        /*
            This zeros out Start-CSS form margin. Probably not the most robust.
        */
        .nav-bar .nav-bar__additional > form {
            margin-bottom: 0;
        }

        /*
            This will probably be better off in utility classes, but that introduces more
            dependancies.
            An alternative could be:
            ```
            .nav-bar .nav-bar__additional--push-end > * {
                float: right;
            }
            ```
            but I like the idea of controlling this from the parent, rather than an unknown child.

        */
        .nav-bar .nav-bar__additional--push-end {
            display: -webkit-flex;
            display: -ms-flexbox;
            display: flex; /* 1 */

            -webkit-justify-content: flex-end;
                      -ms-flex-pack: end;
                    justify-content: flex-end;
        }  

    }


    /* IE9 hacks: */
    /*
    */
/****
    @media #{$fallback--ie9--hack} {
        /*
            The icons force a massive height increase for some reason.
            Setting the height to this only works fine because on 'wide' the nav-bar can't be
            allowed to be double-lined or it breaks, and on 'narrow' the icons are hidden.
        * /

        .nav-bar .subnav__open,
        .nav-bar .subnav__cancel {
            height: $fallback--nav-bar--height;
        }


        //.nav-bar .subnav__cancel::after,
        .nav-bar .subnav__open::after {
            // Increase icon width due to odd cropping, then rescale down:
            width: 1rem;
            -ms-transform: scale(0.5);
        }

        .nav-bar .subnav__cancel::after {
            // Increase icon width due to odd cropping, then rescale down:
            width: 1.1rem;
            -ms-transform: scale(0.8);
        }
    }
*/

    @media screen and (min-width: $fallback--nav-bar--breakpoint--enhanced) and (min-width:0\0) and (min-resolution:.001dpcm) {
    
        .nav-bar {
            display: table;
            width: 100%;
        }
    
        .nav-bar .nav-bar__title {
            display: table-cell;
            width: 1%;
        }
        
        .nav-bar .nav-bar__inner {
            display: table-cell;
            width: 99%;
        }
    }

/* -----------------------------------------------------------------------------------------------*/


/* ---------------------------------------------------------------------------------------------- */


/* -- Fit layout -------------------------------------------------------------------------------- */
    // We only want these adjustments on wider screens:
/****
    @media only screen and (min-width: $fallback--nav-bar--breakpoint--enhanced) {
        .nav-bar--fit {}

            .nav-bar--fit .nav-bar__items {
                width: 100%;

                display: -webkit-flex;
                display: -ms-flexbox;
                display: flex;

                -webkit-justify-content: space-around;
                          -ms-flex-pack: distribute;
                        justify-content: space-around;
            }


            .nav-bar--fit .nav-bar__item {
                -webkit-flex: 0 0 auto;
                    -ms-flex: 0 0 auto;
                        flex: 0 0 auto;
                text-align: center;
                // Borders don't really work in this scenario:
                border: 0;
            }

            .nav-bar--fit .has-subnav {
                display: -webkit-flex;
                display: -ms-flexbox;
                display: flex;
                -webkit-justify-content: center;
                          -ms-flex-pack: center;
                        justify-content: center;
            }
    }
*/

/* -----------------------------------------------------------------------------------------------*/

/*
    These classes help control the layout in the nav-bar__title.

    There are different ways to achieve these layouts with pros and cons to each.
    There are also differences in possible behaviours so there's no right/wrong way.
    E.g. A title section and a single menu opener control could be laid out with either the title
    seciton centered in the width of the whole nav-bar, or centered in the remaining space
    available after decducting the width of the control:

       |-----TITLE-----| (no control)
    A: |-----TITLE---|=| (control does not affect centering)
    B: |----TITLE----|=| (control affects centering)

    B can be acheived easily with flexbox, as can other layouts, which basically govern themselves
    based on which elements are in place:

    DEFAULT (no class):

    |TITLE----------| (no control elements)
    |=|--------TITLE| (control element before title)
    |TITLE--------|=| (control element after title)
    |=|---TITLE---|=| (two control elements)

    RELATIVELY CENTERED (centered on remaining space)

    .nav-bar__title--relatively-centered {
        margin: 0 auto;
    }

*/
/****
    .nav-bar__title--relatively-centered {
        margin: 0 auto;
    }
*/